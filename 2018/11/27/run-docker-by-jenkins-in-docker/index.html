<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="é¢˜ç›®æœ‰ç‚¹ç»•ï¼Œæˆ‘å…ˆå°è¯•ç¿»è¯‘æˆäººè¯â€”â€”é¦–å…ˆå®‰è£…ä¸€ä¸ª jenkinsï¼Œè¿™ä¸ª jenkins æ˜¯é€šè¿‡ docker å®‰è£…çš„ï¼Œç„¶åè¦ç”¨è¿™ä¸ª jenkins æ¥è¿è¡Œè‡ªåŠ¨åŒ–çš„é¡¹ç›®ï¼Œé¡¹ç›®ä¸­ä¼šç”¨åˆ° docker å‘½ä»¤ã€‚è€Œè¿™ç§å·¥ä½œåœºæ™¯ï¼Œé‡‡ç”¨é»˜è®¤çš„é…ç½®ï¼Œæ˜¯å®Œæˆä¸äº†çš„ã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="ç”¨å®‰è£…åœ¨ Docker ä¸­çš„ jenkins è¿è¡Œ Docker ä»»åŠ¡">
<meta property="og:url" content="http://www.up4dev.com/2018/11/27/run-docker-by-jenkins-in-docker/index.html">
<meta property="og:site_name" content="UP4DEV">
<meta property="og:description" content="é¢˜ç›®æœ‰ç‚¹ç»•ï¼Œæˆ‘å…ˆå°è¯•ç¿»è¯‘æˆäººè¯â€”â€”é¦–å…ˆå®‰è£…ä¸€ä¸ª jenkinsï¼Œè¿™ä¸ª jenkins æ˜¯é€šè¿‡ docker å®‰è£…çš„ï¼Œç„¶åè¦ç”¨è¿™ä¸ª jenkins æ¥è¿è¡Œè‡ªåŠ¨åŒ–çš„é¡¹ç›®ï¼Œé¡¹ç›®ä¸­ä¼šç”¨åˆ° docker å‘½ä»¤ã€‚è€Œè¿™ç§å·¥ä½œåœºæ™¯ï¼Œé‡‡ç”¨é»˜è®¤çš„é…ç½®ï¼Œæ˜¯å®Œæˆä¸äº†çš„ã€‚">
<meta property="og:locale">
<meta property="article:published_time" content="2018-11-27T03:57:00.000Z">
<meta property="article:modified_time" content="2020-07-04T13:00:31.000Z">
<meta property="article:author" content="andyzhshg">
<meta property="article:tag" content="æŠ€æœ¯">
<meta property="article:tag" content="docker">
<meta property="article:tag" content="ci">
<meta property="article:tag" content="jenkins">
<meta name="twitter:card" content="summary">
    
    
      
        
          <link rel="shortcut icon" href="/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/assets/up4dev-logo-192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/assets/up4dev-logo-180.png">
        
      
    
    <!-- title -->
    <title>ç”¨å®‰è£…åœ¨ Docker ä¸­çš„ jenkins è¿è¡Œ Docker ä»»åŠ¡</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
	<!-- mathjax -->
	
		<script type="text/x-mathjax-config">
		  MathJax.Hub.Config({
			tex2jax: {
			  skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
			  inlineMath: [['$','$']]
			}
		  });
		</script>
		<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML' async></script>
	
<meta name="generator" content="Hexo 6.2.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="Top" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        <!--
       --><li><a href="/">ä¸»é¡µ</a></li><!--
     --><!--
       --><li><a href="/archives/">æ–‡ç« </a></li><!--
     --><!--
       --><li><a href="/categories/">åˆ†ç±»</a></li><!--
     --><!--
       --><li><a href="/about/">å…³äº</a></li><!--
     --><!--
       --><li><a href="/search/">ğŸ” æœç´¢</a></li><!--
     --><!--
       --><li><a href="/about/xiang-ji-xuan-zhi">ğŸ’œ</a></li><!--
     -->
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="Previous post" href="/2018/12/24/logintech-mouse-whele-not-working/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="Next post" href="/2018/07/27/spdlog-tutorial/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="Back to top" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="Share post" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://www.up4dev.com/2018/11/27/run-docker-by-jenkins-in-docker/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://www.up4dev.com/2018/11/27/run-docker-by-jenkins-in-docker/&text=ç”¨å®‰è£…åœ¨ Docker ä¸­çš„ jenkins è¿è¡Œ Docker ä»»åŠ¡"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://www.up4dev.com/2018/11/27/run-docker-by-jenkins-in-docker/&title=ç”¨å®‰è£…åœ¨ Docker ä¸­çš„ jenkins è¿è¡Œ Docker ä»»åŠ¡"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://www.up4dev.com/2018/11/27/run-docker-by-jenkins-in-docker/&is_video=false&description=ç”¨å®‰è£…åœ¨ Docker ä¸­çš„ jenkins è¿è¡Œ Docker ä»»åŠ¡"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=ç”¨å®‰è£…åœ¨ Docker ä¸­çš„ jenkins è¿è¡Œ Docker ä»»åŠ¡&body=Check out this article: http://www.up4dev.com/2018/11/27/run-docker-by-jenkins-in-docker/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://www.up4dev.com/2018/11/27/run-docker-by-jenkins-in-docker/&title=ç”¨å®‰è£…åœ¨ Docker ä¸­çš„ jenkins è¿è¡Œ Docker ä»»åŠ¡"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://www.up4dev.com/2018/11/27/run-docker-by-jenkins-in-docker/&title=ç”¨å®‰è£…åœ¨ Docker ä¸­çš„ jenkins è¿è¡Œ Docker ä»»åŠ¡"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://www.up4dev.com/2018/11/27/run-docker-by-jenkins-in-docker/&title=ç”¨å®‰è£…åœ¨ Docker ä¸­çš„ jenkins è¿è¡Œ Docker ä»»åŠ¡"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://www.up4dev.com/2018/11/27/run-docker-by-jenkins-in-docker/&title=ç”¨å®‰è£…åœ¨ Docker ä¸­çš„ jenkins è¿è¡Œ Docker ä»»åŠ¡"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://www.up4dev.com/2018/11/27/run-docker-by-jenkins-in-docker/&name=ç”¨å®‰è£…åœ¨ Docker ä¸­çš„ jenkins è¿è¡Œ Docker ä»»åŠ¡&description=&lt;p&gt;é¢˜ç›®æœ‰ç‚¹ç»•ï¼Œæˆ‘å…ˆå°è¯•ç¿»è¯‘æˆäººè¯â€”â€”é¦–å…ˆå®‰è£…ä¸€ä¸ª jenkinsï¼Œè¿™ä¸ª jenkins æ˜¯é€šè¿‡ docker å®‰è£…çš„ï¼Œç„¶åè¦ç”¨è¿™ä¸ª jenkins æ¥è¿è¡Œè‡ªåŠ¨åŒ–çš„é¡¹ç›®ï¼Œé¡¹ç›®ä¸­ä¼šç”¨åˆ° docker å‘½ä»¤ã€‚è€Œè¿™ç§å·¥ä½œåœºæ™¯ï¼Œé‡‡ç”¨é»˜è®¤çš„é…ç½®ï¼Œæ˜¯å®Œæˆä¸äº†çš„ã€‚&lt;/p&gt;"><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://www.up4dev.com/2018/11/27/run-docker-by-jenkins-in-docker/&t=ç”¨å®‰è£…åœ¨ Docker ä¸­çš„ jenkins è¿è¡Œ Docker ä»»åŠ¡"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%98%E8%B5%B7"><span class="toc-number">1.</span> <span class="toc-text">ç¼˜èµ·</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%9D%E8%B7%AF"><span class="toc-number">2.</span> <span class="toc-text">æ€è·¯</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%97%AE%E9%A2%98"><span class="toc-number">3.</span> <span class="toc-text">é—®é¢˜</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B9%E6%A1%88"><span class="toc-number">4.</span> <span class="toc-text">æ–¹æ¡ˆ</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        ç”¨å®‰è£…åœ¨ Docker ä¸­çš„ jenkins è¿è¡Œ Docker ä»»åŠ¡
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">andyzhshg</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2018-11-27T03:57:00.000Z" itemprop="datePublished">2018-11-27</time>
        
      
    </div>


      
    <div class="article-category">
        <i class="fas fa-archive"></i>
        <a class="category-link" href="/categories/%E6%8A%80%E6%9C%AF/">æŠ€æœ¯</a>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link-link" href="/tags/ci/" rel="tag">ci</a>, <a class="tag-link-link" href="/tags/docker/" rel="tag">docker</a>, <a class="tag-link-link" href="/tags/jenkins/" rel="tag">jenkins</a>, <a class="tag-link-link" href="/tags/%E6%8A%80%E6%9C%AF/" rel="tag">æŠ€æœ¯</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>é¢˜ç›®æœ‰ç‚¹ç»•ï¼Œæˆ‘å…ˆå°è¯•ç¿»è¯‘æˆäººè¯â€”â€”é¦–å…ˆå®‰è£…ä¸€ä¸ª jenkinsï¼Œè¿™ä¸ª jenkins æ˜¯é€šè¿‡ docker å®‰è£…çš„ï¼Œç„¶åè¦ç”¨è¿™ä¸ª jenkins æ¥è¿è¡Œè‡ªåŠ¨åŒ–çš„é¡¹ç›®ï¼Œé¡¹ç›®ä¸­ä¼šç”¨åˆ° docker å‘½ä»¤ã€‚è€Œè¿™ç§å·¥ä½œåœºæ™¯ï¼Œé‡‡ç”¨é»˜è®¤çš„é…ç½®ï¼Œæ˜¯å®Œæˆä¸äº†çš„ã€‚</p>
<span id="more"></span>

<h2 id="ç¼˜èµ·"><a href="#ç¼˜èµ·" class="headerlink" title="ç¼˜èµ·"></a>ç¼˜èµ·</h2><p>æ•…äº‹çš„ç¼˜èµ·æ˜¯è¿™ä¸ªåšå®¢ï¼Œä»–æ˜¯åŸºäº Github Pages çš„ï¼Œä½¿ç”¨çš„è¿‡ç¨‹å°±æ˜¯ç”¨ MarkDown å†™æ–‡ç« ï¼Œé€šè¿‡ HEXO ç³»ç»Ÿæ¥æ„å»ºï¼Œç„¶å push åˆ° github ä¸Šã€‚</p>
<p>æ•´ä½“çš„æµç¨‹å®é™…ä¸Šä¹Ÿä¸ç®—å¤æ‚ï¼Œä½†æ˜¯ä½œä¸ºä¸€ä¸ªç¨‹åºå‘˜ï¼Œæ€»è§‰å¾—ä¼šæœ‰æ›´åŠ æ™ºèƒ½å’Œçœäº‹çš„æ–¹æ³•ï¼ˆå®é™…ä¸Šå°±æ˜¯ä¸æŠ˜è…¾ä¸èˆ’æœè€Œå·²ï¼‰ã€‚</p>
<p>æ‰€ä»¥æˆ‘æƒ³æ„å»ºä¸€ä¸ªç³»ç»Ÿï¼Œæ¥è¾¾åˆ°åšå®¢çš„è‡ªåŠ¨æ„å»ºå’Œå‘å¸ƒçš„æ•ˆæœã€‚é‰´äºè¿™éƒ¨åˆ†è·Ÿä¸»é¢˜çš„å…³ç³»ä¸æ˜¯ç‰¹åˆ«å¤§ï¼Œè¿˜æ˜¯ä¸å†èµ˜è¿°åšå®¢çš„äº‹äº†ï¼Œä¹Ÿè®¸ä»¥åä¼šå†™ä¸€ç¯‡åšå®¢è‡ªåŠ¨æ„å»ºçš„æ–‡ç« ï¼Œè¿™é‡Œå°±ä¸å±•å¼€äº†ã€‚</p>
<h2 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><p>æåˆ°è‡ªåŠ¨æ„å»ºï¼Œå¾ˆè‡ªç„¶çš„æƒ³åˆ°äº†jenkinsï¼›ç„¶åæ°å¥½æˆ‘æœ‰ä¸€å°ç¾¤æ™–çš„NASï¼Œä¸Šè¾¹å¯ä»¥è·‘Dockerï¼Œæ‰€ä»¥åˆå¾ˆè‡ªç„¶çš„æƒ³åˆ°äº†é€šè¿‡Dockeræ¥å®‰è£…jenkinsï¼›æœ‰äº†jenkinsï¼Œå½“ç„¶è¿˜è¦é€šè¿‡jenkinsæ¥è¿è¡Œè‡ªåŠ¨åŒ–çš„ä»»åŠ¡ï¼Œè¿è¡Œä»»åŠ¡æœ€ç®€å•ä¸”å¯¹NASç³»ç»Ÿä¾µå…¥æœ€å°çš„æ–¹å¼æ˜¯é€šè¿‡Dockerè¿è¡Œä»»åŠ¡ã€‚</p>
<h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><p>ä¸Šé¢çš„æ€è·¯çœ‹ä¼¼å¾ˆé¡ºç•…ï¼Œä½†æ˜¯è®¤çœŸæ€è€ƒä¸€ä¸‹ä¼šå‘ç°ï¼Œå› ä¸ºjenkinsæœ¬èº«æ˜¯è¿è¡Œåœ¨ä¸€ä¸ªå®¹å™¨é‡Œçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨åˆ›å»ºä»»åŠ¡çš„æ—¶å€™ç»™å‡ºçš„è„šæœ¬æˆ–å‘½ä»¤ï¼Œéƒ½æ˜¯åœ¨è¿™ä¸ªå®¹å™¨å†…è¿è¡Œçš„ï¼Œè¿™å°±å‡ºç°äº†ä¸€ä¸ªé—®é¢˜ï¼Œè¿™ä¸ªå®¹å™¨å†…éƒ¨æ˜¯æ²¡æœ‰dockerç¯å¢ƒçš„ï¼Œæ‰€ä»¥æ‰§è¡Œä¸äº†dockerå‘½ä»¤ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¿…é¡»æƒ³åŠæ³•æ¥è®©è¿™ä¸ªå®¹å™¨å†…éƒ¨å¯ä»¥æ‰§è¡Œdockerä»»åŠ¡ã€‚</p>
<h2 id="æ–¹æ¡ˆ"><a href="#æ–¹æ¡ˆ" class="headerlink" title="æ–¹æ¡ˆ"></a>æ–¹æ¡ˆ</h2><p>ç»è¿‡ä¸€ç•ªæœç´¢ä¹‹åï¼Œæˆ‘æ‰¾åˆ°äº†äº†è¿™ç¯‡æ–‡ç« ï¼š<a target="_blank" rel="noopener" href="http://www.dockone.io/article/431">åœ¨ï¼ˆDockeré‡Œçš„ï¼‰Jenkinsé‡Œè¿è¡ŒDocker</a>ã€‚</p>
<p>æœ€ç»ˆæˆ‘é€‰æ‹©äº†æ–‡ä¸­æåˆ°çš„<code>DooDï¼ˆDocker-outside-of-Dockerï¼‰</code>æ–¹æ¡ˆã€‚</p>
<p>ä¹Ÿå°±æ˜¯æ‰€æƒ³åŠæ³•è®©jenkinså®¹å™¨å¯ä»¥æ‰§è¡Œå®¿ä¸»æœºä¸Šçš„dockerå‘½ä»¤ã€‚</p>
<p>å› ä¸ºéœ€è¦ç»™äºˆjenkinsç”¨æˆ·sudoæƒé™ï¼Œç„¶è€Œå®˜æ–¹çš„é•œåƒjenkinsé»˜è®¤æ˜¯æ²¡æœ‰sudoç”¨æˆ·æƒé™çš„ï¼Œæ‰€ä»¥æˆ‘åœ¨å®˜æ–¹é•œåƒçš„åŸºç¡€ä¸Šæ–°å»ºäº†ä¸€ä¸ªé•œåƒï¼Œé»˜è®¤ç»™jenkinsç”¨æˆ·sudoæƒé™ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://hub.docker.com/r/andyzhshg/jenkins/">andyzhshg&#x2F;jenkins</a></p>
<p>æ”¹åŠ¨çš„å†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> jenkins:<span class="number">2.60</span>.<span class="number">3</span></span><br><span class="line"><span class="keyword">MAINTAINER</span> andyzhshg &lt;andyzhshg@gmail.com&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">USER</span> root</span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt-get update \</span></span><br><span class="line"><span class="language-bash">  &amp;&amp; apt-get install -y sudo \</span></span><br><span class="line"><span class="language-bash">  &amp;&amp; <span class="built_in">rm</span> -rf /var/lib/apt/lists/*</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">echo</span> <span class="string">&quot;jenkins ALL=NOPASSWD: ALL&quot;</span> &gt;&gt; /etc/sudoers</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">USER</span> jenkins</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œè¿™ä¸ªé•œåƒçš„å®¹å™¨å¾ˆç®€å•ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker run -d \</span><br><span class="line">	-v /var/run/docker.sock:/var/run/docker.sock \</span><br><span class="line">	-v $(<span class="built_in">which</span> docker):/usr/bin/docker </span><br><span class="line">	-p 8080:8080 \</span><br><span class="line">	andyzhshg/jenkins</span><br></pre></td></tr></table></figure>

<p>éœ€è¦é‡ç‚¹å…³æ³¨å¸¦æœ‰ <code>-v</code> å‚æ•°çš„ä¸¤è¡Œï¼š</p>
<p>ç¬¬1è¡Œæ˜¯å°†å®¿ä¸»æœºçš„ <code>/var/run/docker.sock</code> æ˜ å°„åˆ°å®¹å™¨ä¸­ï¼Œè¿™æ ·åœ¨å®¹å™¨ä¸­è¿è¡Œçš„ <code>docker</code> å‘½ä»¤ï¼Œå°±ä¼šåœ¨å®¿ä¸»æœºä¸Šæ¥æ‰§è¡Œã€‚</p>
<p>ç¬¬2è¡Œæ˜¯å°†å®¿ä¸»æœºçš„ <code>docker</code> ç¨‹åºæ˜ å°„è¿›å®¹å™¨ä¸­ï¼Œè¿™æ ·æœ¬èº«æ²¡æœ‰å®‰è£… <code>docker</code> çš„ <code>jenkins</code> å®¹å™¨å°±å¯ä»¥æ‰§è¡Œ <code>docker</code> å‘½ä»¤äº†ï¼ˆäº‹å®ä¸Šå®¹å™¨é‡Œæ˜¯æ²¡æœ‰è¿è¡Œ <code>docker</code> çš„æœåŠ¡çš„ï¼Œæˆ‘ä»¬åªæ˜¯ç”¨è¿™ä¸ªæ˜ å°„è¿›å®¹å™¨çš„ <code>docker</code> æ¥ä½œä¸ºå®¢æˆ·ç«¯å‘é€dockerçš„æŒ‡ä»¤åˆ° <code>/var/run/docker.sock</code> è€Œå·²ï¼Œè€Œ <code>/var/run/docker.sock</code> å·²ç»è¢«é“¾æ¥åˆ°å®¿ä¸»æœºäº†ï¼‰ã€‚</p>
<p>è‡³æ­¤ï¼Œæˆ‘ä»¬çš„ <code>jenkins</code> å°±å‡†å¤‡å°±ç»ªäº†ã€‚</p>
<blockquote>
<p>å½“ç„¶ï¼Œé€šå¸¸æƒ…å†µä¸‹æˆ‘ä»¬è¿˜éœ€è¦æŠŠjenkinsè‡ªèº«çš„æ•°æ®ç›®å½•é“¾æ¥åˆ°å®¿ä¸»æœºçš„ç›®å½•ä¸­ï¼Œä»¥ä¿è¯å®¹å™¨è¢«é”€æ¯åè¿˜èƒ½å¤Ÿå†å¯åŠ¨æ–°çš„æ•°æ®è€Œæ•°æ®å¯ä»¥å¾—åˆ°ä¿ç•™ï¼Œè¿™äº›å¯ä»¥å‚è€ƒjenkinså®˜æ–¹é•œåƒçš„è¯´æ˜ã€‚</p>
<p>æ¯”å¦‚åœ¨<code>docker run</code>åŠ ä¸Š <code>-v your_jenkins_data_path:/var/jenkins_home</code>å‚æ•°ã€‚</p>
</blockquote>
<p>åˆå§‹åŒ–jenkinsçš„é…ç½®ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨jenkinsä¸Šæ¥æ–°å»ºä¸€ä¸ªè‡ªåŠ¨åŒ–çš„æ„å»ºé¡¹ç›®äº†ï¼Œæ¯”å¦‚æˆ‘çš„blogè‡ªåŠ¨æ„å»ºé¡¹ç›®çš„è‡ªåŠ¨åŒ–è„šæœ¬å¤§æ¦‚å°±æ˜¯è¿™ä¸ªæ ·å­ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;new blogs posted, begin auto build.&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»gitlabæ‹‰å–å†…å®¹æ›´æ–°ï¼Œæ„å»ºå¹¶æ¨é€åˆ°github pages</span></span><br><span class="line">sudo docker run --<span class="built_in">rm</span> -v /volume1/docker/blog/key/:/root/.ssh -v /volume1/docker/blog/up4dev:/blog andyzhshg/hexo</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¨é€ä¸€ä»½å†…å®¹åŸæ–‡åˆ°githubåšå¤‡ä»½</span></span><br><span class="line">sudo docker run --<span class="built_in">rm</span> -v /volume1/docker/blog/key/:/root/.ssh -v /volume1/docker/blog/up4dev:/blog andyzhshg/hexo /blog/backup2github.sh </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;auto build done.&quot;</span></span><br></pre></td></tr></table></figure>

<p>è¿™è™½ç„¶æ˜¯ä¸€ä¸ªç‰¹ä¾‹åŒ–çš„åº”ç”¨åœºæ™¯ï¼Œä½†æ˜¯å…¶ä»–çš„é¡¹ç›®ä¹Ÿå¤§åŒå°å¼‚ï¼Œåªè¦å‡†å¤‡å¥½dockerçš„é•œåƒï¼Œç„¶åå†jenkinsæ‰§è¡Œ<code>docker run</code>å°±å¯ä»¥äº†ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œçš„<code>docker run</code>ä¸€å®šæ˜¯è¦ä»¥sudoæƒé™è¿è¡Œçš„ã€‚</p>

  </div>
</article>

    <div class="blog-post-comments">
        <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the comments.</noscript>
        </div>
    </div>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">ä¸»é¡µ</a></li>
         
          <li><a href="/archives/">æ–‡ç« </a></li>
         
          <li><a href="/categories/">åˆ†ç±»</a></li>
         
          <li><a href="/about/">å…³äº</a></li>
         
          <li><a href="/search/">ğŸ” æœç´¢</a></li>
         
          <li><a href="/about/xiang-ji-xuan-zhi">ğŸ’œ</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%98%E8%B5%B7"><span class="toc-number">1.</span> <span class="toc-text">ç¼˜èµ·</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%9D%E8%B7%AF"><span class="toc-number">2.</span> <span class="toc-text">æ€è·¯</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%97%AE%E9%A2%98"><span class="toc-number">3.</span> <span class="toc-text">é—®é¢˜</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B9%E6%A1%88"><span class="toc-number">4.</span> <span class="toc-text">æ–¹æ¡ˆ</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://www.up4dev.com/2018/11/27/run-docker-by-jenkins-in-docker/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://www.up4dev.com/2018/11/27/run-docker-by-jenkins-in-docker/&text=ç”¨å®‰è£…åœ¨ Docker ä¸­çš„ jenkins è¿è¡Œ Docker ä»»åŠ¡"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://www.up4dev.com/2018/11/27/run-docker-by-jenkins-in-docker/&title=ç”¨å®‰è£…åœ¨ Docker ä¸­çš„ jenkins è¿è¡Œ Docker ä»»åŠ¡"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://www.up4dev.com/2018/11/27/run-docker-by-jenkins-in-docker/&is_video=false&description=ç”¨å®‰è£…åœ¨ Docker ä¸­çš„ jenkins è¿è¡Œ Docker ä»»åŠ¡"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=ç”¨å®‰è£…åœ¨ Docker ä¸­çš„ jenkins è¿è¡Œ Docker ä»»åŠ¡&body=Check out this article: http://www.up4dev.com/2018/11/27/run-docker-by-jenkins-in-docker/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://www.up4dev.com/2018/11/27/run-docker-by-jenkins-in-docker/&title=ç”¨å®‰è£…åœ¨ Docker ä¸­çš„ jenkins è¿è¡Œ Docker ä»»åŠ¡"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://www.up4dev.com/2018/11/27/run-docker-by-jenkins-in-docker/&title=ç”¨å®‰è£…åœ¨ Docker ä¸­çš„ jenkins è¿è¡Œ Docker ä»»åŠ¡"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://www.up4dev.com/2018/11/27/run-docker-by-jenkins-in-docker/&title=ç”¨å®‰è£…åœ¨ Docker ä¸­çš„ jenkins è¿è¡Œ Docker ä»»åŠ¡"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://www.up4dev.com/2018/11/27/run-docker-by-jenkins-in-docker/&title=ç”¨å®‰è£…åœ¨ Docker ä¸­çš„ jenkins è¿è¡Œ Docker ä»»åŠ¡"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://www.up4dev.com/2018/11/27/run-docker-by-jenkins-in-docker/&name=ç”¨å®‰è£…åœ¨ Docker ä¸­çš„ jenkins è¿è¡Œ Docker ä»»åŠ¡&description=&lt;p&gt;é¢˜ç›®æœ‰ç‚¹ç»•ï¼Œæˆ‘å…ˆå°è¯•ç¿»è¯‘æˆäººè¯â€”â€”é¦–å…ˆå®‰è£…ä¸€ä¸ª jenkinsï¼Œè¿™ä¸ª jenkins æ˜¯é€šè¿‡ docker å®‰è£…çš„ï¼Œç„¶åè¦ç”¨è¿™ä¸ª jenkins æ¥è¿è¡Œè‡ªåŠ¨åŒ–çš„é¡¹ç›®ï¼Œé¡¹ç›®ä¸­ä¼šç”¨åˆ° docker å‘½ä»¤ã€‚è€Œè¿™ç§å·¥ä½œåœºæ™¯ï¼Œé‡‡ç”¨é»˜è®¤çš„é…ç½®ï¼Œæ˜¯å®Œæˆä¸äº†çš„ã€‚&lt;/p&gt;"><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://www.up4dev.com/2018/11/27/run-docker-by-jenkins-in-docker/&t=ç”¨å®‰è£…åœ¨ Docker ä¸­çš„ jenkins è¿è¡Œ Docker ä»»åŠ¡"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2015-2022
    andyzhshg
  </div>
  <div class="footer-right">
    <nav>
      <ul>
        <!--
       --><li><a href="/">ä¸»é¡µ</a></li><!--
     --><!--
       --><li><a href="/archives/">æ–‡ç« </a></li><!--
     --><!--
       --><li><a href="/categories/">åˆ†ç±»</a></li><!--
     --><!--
       --><li><a href="/about/">å…³äº</a></li><!--
     --><!--
       --><li><a href="/search/">ğŸ” æœç´¢</a></li><!--
     --><!--
       --><li><a href="/about/xiang-ji-xuan-zhi">ğŸ’œ</a></li><!--
     -->
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->
 
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script> 




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script> 
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-60523957-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-60523957-1');
    </script>

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Umami Analytics -->

<!-- Disqus Comments -->

    <script type="text/javascript">
        var disqus_shortname = 'up4dev';

        (function(){
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }());
    </script>

<!-- utterances Comments -->

</body>
</html>
